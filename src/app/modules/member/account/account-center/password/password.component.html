<div class="password-container">
  <h2>修改密碼</h2>

  <form class="password-form" (ngSubmit)="changePassword()">
    <div class="form-group">
      <label for="currentPassword">目前密碼</label>
      <div class="password-input">
        <input [type]="showCurrentPassword ? 'text' : 'password'"
               id="currentPassword"
               [(ngModel)]="passwordData.currentPassword"
               name="currentPassword"
               required>
        <i class="fas"
           [class.fa-eye]="!showCurrentPassword"
           [class.fa-eye-slash]="showCurrentPassword"
           (click)="showCurrentPassword = !showCurrentPassword"></i>
      </div>
    </div>

    <div class="form-group">
      <label for="newPassword">新密碼</label>
      <div class="password-input">
        <input [type]="showNewPassword ? 'text' : 'password'"
               id="newPassword"
               [(ngModel)]="passwordData.newPassword"
               (ngModelChange)="checkPasswordStrength()"
               name="newPassword"
               required>
        <i class="fas"
           [class.fa-eye]="!showNewPassword"
           [class.fa-eye-slash]="showNewPassword"
           (click)="showNewPassword = !showNewPassword"></i>
      </div>
      <div class="password-strength" *ngIf="passwordData.newPassword">
        <div class="strength-bar">
          <span [class]="'strength-level-' + passwordStrength"></span>
        </div>
        <span class="strength-text">密碼強度：{{strengthText}}</span>
      </div>
      <ul class="password-rules">
        <li [class.valid]="hasMinLength">至少 8 個字元</li>
        <li [class.valid]="hasUpperCase">至少包含一個大寫字母</li>
        <li [class.valid]="hasLowerCase">至少包含一個小寫字母</li>
        <li [class.valid]="hasNumber">至少包含一個數字</li>
        <li [class.valid]="hasSpecialChar">至少包含一個特殊符號</li>
      </ul>
    </div>

    <div class="form-group">
      <label for="confirmPassword">確認新密碼</label>
      <div class="password-input">
        <input [type]="showConfirmPassword ? 'text' : 'password'"
               id="confirmPassword"
               [(ngModel)]="passwordData.confirmPassword"
               name="confirmPassword"
               required>
        <i class="fas"
           [class.fa-eye]="!showConfirmPassword"
           [class.fa-eye-slash]="showConfirmPassword"
           (click)="showConfirmPassword = !showConfirmPassword"></i>
      </div>
    </div>

    <button type="submit" class="save-btn">變更密碼</button>
  </form>
</div>
